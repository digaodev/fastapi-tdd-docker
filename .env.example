# FastAPI TDD Docker - Environment Configuration
# Copy this file to .env and adjust values for your local environment
# Note: docker-compose.yml overrides these URLs to use 'db' hostname in containers

# ============================================================================
# APPLICATION
# ============================================================================
APP_ENVIRONMENT=dev
APP_TESTING=false

# ============================================================================
# DATABASE - Development
# ============================================================================
# For local development (running outside Docker)
# Use 'localhost' when running uvicorn/alembic on your host machine
APP_DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/web_dev

# Alternative: Use DATABASE_URL (common in PaaS platforms like Heroku, Render)
# DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/web_dev

# ============================================================================
# DATABASE - Testing
# ============================================================================
# Separate database for tests (ensures isolation from development data)
APP_DATABASE_TEST_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/web_test

# Alternative:
# DATABASE_TEST_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/web_test

# ============================================================================
# DOCKER COMPOSE NOTES
# ============================================================================
# When running with 'make dev' or 'docker compose up':
# - The 'db' service name is used instead of 'localhost'
# - docker-compose.yml overrides these URLs automatically
# You don't need to change these values for Docker development

# ============================================================================
# ALEMBIC MIGRATIONS
# ============================================================================
# Alembic reads APP_DATABASE_URL or DATABASE_URL for migrations
# If running migrations locally: use localhost
# If running in Docker: use 'make migrate' (automatically uses 'db' hostname)

# Example migration commands:
# Local:  APP_DATABASE_URL=<url> uv run alembic revision --autogenerate -m "description"
# Docker: make migrate

# ============================================================================
# POSTGRESQL CREDENTIALS (Docker only)
# ============================================================================
# These are used by the PostgreSQL container (docker-compose.yml)
# The app does NOT read these (uses APP_DATABASE_URL instead)
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=web_dev
